
# MySql 笔记

### Linux 环境下安装 mysql-5.7
```
1.解压mysql-5.7.23-linux-glibc2.12-x86_64.tar.gz到/usr/local/目录

2.添加用户组, 创建mysql用户添加到mysql组:
groupadd mysql
useradd -g mysql mysql

3. 设置mysql文件夹权限
chown -R mysql.mysql /usr/local/mysql/

4. mysql的服务脚本放到系统服务中
cp -a /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld

5. 创建my.cnf配置文件到 /etc/my.cnf
# For advice on how to change settings please see
# http://dev.mysql.com/doc/refman/5.7/en/server-configuration-defaults.html
# *** DO NOT EDIT THIS FILE. It's a template which will be copied to the
# *** default location during install, and will be replaced if you
# *** upgrade to a newer version of MySQL.

[mysqld]

# Remove leading # and set to the amount of RAM for the most important data
# cache in MySQL. Start at 70% of total RAM for dedicated server, else 10%.
# innodb_buffer_pool_size = 128M
# Remove leading # to turn on a very important data integrity option: logging
# changes to the binary log between backups.
# log_bin
# These are commonly set, remove the # and set as required.
# basedir = .....
# datadir = .....
# port = .....
# server_id = .....
# socket = .....

basedir = /usr/local/mysql
datadir = /usr/local/mysql/data
port = 3306
socket  = /tmp/mysql.sock
character-set-server = utf8

#init_connect='SET NAMES utf8'

log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid

# Remove leading # to set options mainly useful for reporting servers.
# The server defaults are faster for transactions and fast SELECTs.
# Adjust sizes as needed, experiment to find the optimal values.
# join_buffer_size = 128M
# sort_buffer_size = 2M
# read_rnd_buffer_size = 2M
#lower_case_table_names = 1
#innodb_force_recovery= 1
#sql_mode=STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION
#max_connections=5000
#default-time_zone = '+8:00'

sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES

6. 创建mysqld.log配置文件到 /var/log/mysqld.log
chown -R mysql /var/log/mysqld.log
chgrp -R mysql /var/log/mysqld.log

7. 创建目录文件
mkdir /var/run/mysqld/mysqld.pid
chown -R mysql /var/run/mysqld/
chgrp -R mysql /var/run/mysqld/

8. 安装和初始化数据库
首先要进入bin文件:cd /usr/local/mysql/bin/
初始化:./mysqld --initialize --user=mysql --basedir=/usr/local/mysql/ --datadir=/usr/local/mysql/data/
安全启动:./mysqld_safe --user=mysql &
先进入cd support-files文件: cd /usr/local/mysql/support-files/
把support-files/mysql.server 拷贝为/etc/init.d/mysql:cp mysql.server /etc/init.d/mysql
并设置运行权限:chmod +x /etc/init.d/mysql
把mysql注册为开机启动的服务:chkconfig --add mysql
查看是否添加成功:chkconfig --list mysql
启动: service mysql start
登录mysql: ./mysql -u root -p
设置通用启动: ln -s /usr/local/mysql/bin/mysql /usr/bin
启动:mysql -u root -p
修改密码: set password=password("123456");
设置远程登录权限:ALTER USER 'root'@'localhost' PASSWORD EXPIRE NEVER;
立即生效: flush privileges;
```




**linux下mysql数据的导出和导入**

**导出整个数据库中的所有数据**

`mysqldump -u userName -p  dabaseName  > fileName.sql`

导出数据库中的某个表的数据

`mysqldump -u userName -p  dabaseName tableName > fileName.sql`

导出整个数据库中的所有的表结构

`mysqldump -u userName -p -d dabaseName  > fileName.sql`

导出整个数据库中某个表的表结构

`mysqldump -u userName -p -d dabaseName tableName > fileName.sql`

导入mysql方法

`mysql -uroot -p database < fileName.sql`






MySql:/usr/local/java/mysql
/etc/my.cnf
/etc/init.d/mysql

rpm -qa | grep -i mysql
yum -y remove java-1.4.2-gcj-compat-1.4.2.0-40jpp.115



分页查询

`SELECT * FROM table LIMIT [offset,] rows | rows OFFSET offset`


